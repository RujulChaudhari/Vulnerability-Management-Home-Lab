# Home Lab Setup Guide

## Introduction

This guide will walk you through the process of setting up a home lab for hands-on learning about vulnerability scanning and remediation. The lab will include a virtual machine (VM) with intentionally vulnerable configurations, and we will use Nessus, a popular vulnerability scanner, to identify and fix these vulnerabilities.


### Prerequisites

- A computer with Hyper-V active (can be done in VirtualBox too)
- Basic understanding of virtualization concepts
- Internet connection


## Step 1: Create a Vulnerable VM in Hyper-V

1. Open Hyper-V Manager on your host machine.
2. Create a new [Windows virtual](https://www.microsoft.com/en-us/evalcenter/download-windows-server-2022) machine and follow the wizard to set up basic configurations (e.g., name, location, memory, network).
3. Once the VM is setup, go ahead and boot it up.


## Step 2: Inside the VM

1. Once the VM is up, go to the Windows Defender Firewall.
   ![](https://i.imgur.com/CYookKx.png)
3. Click on "Windows Defender Firewall Properties", and disable the firewall for "Domanin Profile", "Private Profile", and "Public Profile".
4. Once that is done, you should now be able to ping your VM from the host machine.
5. Next you want to enable the "Remote Registry" service and File and printer Settings. What this will do is allow Nessus to scan the VM's registry for any vulentabilities. <br>
   ![](https://i.imgur.com/FzUFkAC.png)
   ![](https://i.imgur.com/dfYEC9O.png)
6. You also want to turn off UAC. <br>
   ![](https://i.imgur.com/Ax1GjEp.png)


## Step 3: Install Nessus

1. Download and install Nessus on your host machine from the [official website](https://www.tenable.com/downloads/nessus).
2. Follow the installation wizard, and make note of the activation code provided.
3. Once you reach this part, you want to select "Nessus Essentials" as your service.
   ![](https://i.imgur.com/xwD2GPs.png)
4. It will start Initalizing. This might take a bit, so be paitent.
5. Once you done those steps. For the final step in the VM we're going to add a key in the registry that will allow Nessus to connect in.
6. This will be under HKEY_LOCAL_MACHINE > SOFTWARE > Microsoft > Windows > CurrentVersion > Policies > System.
7. Here we will create a DWORD called "LocalAccountTokenFilterPolicy" and set the value to 1.
   ![](https://i.imgur.com/y59kFSH.png)
8. Once all the steps are done, go ahead and give the vm a reboot.


## Step 4: Configure Nessus

1. Open your web browser and navigate to `https://localhost:8834`.
2. Log in with the credentials created during the Nessus installation.
3. Activate Nessus using the provided activation code.
4. Once you've activated nessus, you will see the "My Scans" tab, go ahead and click on it.
5. Here you will see a option to "Create a new scan", so ahead and select that. This will display several scanning options. For the sake of this turorial you want to select the "Basic Network Scan" option.
6. Here we want to enter a name for the scan, and select who the target is. For the target, you want to put in the Ip of the VM we created.
   ![](https://i.imgur.com/06wbJ29.png)
7. You want to select "Port Scan (all ports)"
8. Once you've done that, your going to click on the Credentials tab. There you will enter your local admin credentials that you have on the VM.
9. Once everthing has been entered your going to hit "Save"


## Step 4: Perform Vulnerability Scan

1. Once your device is all configured, go ahead and run a quick scan on the vm to get a baseline of the system. This will more or less create a snapshot of the current vulenrabilities (should be reletavly low).
   ![](https://i.imgur.com/8H9JQul.png)
   ![](https://i.imgur.com/pB81mJX.png)


## Step 5: Download deprecated software

1. This can be any old/schetchy software. For the sake of this tutorial we're going to use oldschool firefox. You can find all previous versions of Firefox [here](https://ftp.mozilla.org/pub/firefox/releases/)

## Step 7: Do another scan in Nessus

1. So once you have the deprecated software of your choice downloaded, go ahead and run another scan in Nessue.
   ![](https://i.imgur.com/ztsAWZR.png)
2. Once your scan finishes you can see that we now have more vulnerabilities than before from our baseline scan.


## Step 6: Remediate Vulnerabilities

1. Access your vulnerable VM and begin addressing the identified vulnerabilities.
2. Install updates, patches, or remove deprecated software to secure the VM.
3. Re-run the Nessus scan periodically to track your progress.

## Conclusion

Congratulations! You have successfully set up a home lab, performed a vulnerability scan using Nessus, and worked on remediating vulnerabilities. This hands-on experience will enhance your understanding of cybersecurity concepts and best practices.

